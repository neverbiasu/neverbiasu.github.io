"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[8436],{66262:(a,i)=>{i.A=(a,i)=>{const n=a.__vccOpts||a;for(const[a,e]of i)n[a]=e;return n}},4010:(a,i,n)=>{n.r(i),n.d(i,{comp:()=>l,data:()=>t});var e=n(20641);const s={},l=(0,n(66262).A)(s,[["render",function(a,i){return(0,e.uX)(),(0,e.CE)("div",null,i[0]||(i[0]=[(0,e.Fv)('<h1 id="如何创建原创角色-lora-sdxl-训练-sdxl-角色训练" tabindex="-1"><a class="header-anchor" href="#如何创建原创角色-lora-sdxl-训练-sdxl-角色训练"><span>如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练</span></a></h1><figure><img src="http://digitalcreativeai.net/_next/image?url=https%3A%2F%2Fdca.data-hub-center.com%2Fcontent%2Fuploads%2F2025%2F05%2Feye_catch_original-character-lora-sdxl-character-training-en.jpg&amp;w=3840&amp;q=80" alt="如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练封面图片" tabindex="0" loading="lazy"><figcaption>如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练封面图片</figcaption></figure><h2 id="目录" tabindex="-1"><a class="header-anchor" href="#目录"><span>目录</span></a></h2><ol><li><a href="#sdxl-%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7">SDXL 预训练模型的兼容性</a> 1.1. <a href="#%E5%85%BC%E5%AE%B9%E6%80%A7%E6%B5%8B%E8%AF%95%E7%94%9F%E6%88%90">兼容性测试生成</a></li><li><a href="#%E4%BD%BF%E7%94%A8-kohya-ss-gui-%E7%9A%84%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E8%BF%9B%E8%A1%8C%E8%AE%AD%E7%BB%83">使用 Kohya ss GUI 的默认参数进行训练</a> 2.1. <a href="#%E6%95%B0%E6%8D%AE%E9%9B%86">数据集</a> 2.2. <a href="#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0">默认参数</a> 2.3. <a href="#%E4%BD%BF%E7%94%A8%E8%AE%AD%E7%BB%83%E5%A5%BD%E7%9A%84-lora-%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%E7%94%9F%E6%88%90">使用训练好的 LoRA 进行测试生成</a></li><li><a href="#%E6%9C%AC%E6%AC%A1%E8%AE%AD%E7%BB%83%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0">本次训练中使用的参数</a> 3.1. <a href="#%E5%AD%A6%E4%B9%A0%E7%8E%87%E8%B0%83%E5%BA%A6%E5%99%A8">学习率调度器</a> 3.2. <a href="#%E4%BC%98%E5%8C%96%E5%99%A8">优化器</a> 3.3. <a href="#%E5%85%B6%E4%BB%96%E5%8F%82%E6%95%B0">其他参数</a></li><li><a href="#%E8%AE%AD%E7%BB%83%E7%BB%93%E6%9E%9C">训练结果</a> 4.1. <a href="#%E4%B8%8E%E5%85%B6%E4%BB%96-lora-%E7%9A%84%E7%BB%84%E5%90%88">与其他 LoRA 的组合</a> 4.2. <a href="#%E5%BA%94%E7%94%A8%E4%BA%8E%E5%90%8C%E7%B3%BB%E5%88%97%E7%9A%84%E6%A3%80%E6%9F%A5%E7%82%B9%E6%A8%A1%E5%9E%8B">应用于同系列的检查点模型</a></li><li><a href="#%E7%BB%93%E8%AE%BA">结论</a></li></ol><hr><h2 id="sdxl-预训练模型的兼容性" tabindex="-1"><a class="header-anchor" href="#sdxl-预训练模型的兼容性"><span>SDXL 预训练模型的兼容性</span></a></h2><p>在 SDXL 中，LoRA 的通用性不如 SD1.5。LoRA 可应用的检查点模型取决于预训练模型的系列。当在同一系列中生成时，LoRA 应用不会有问题，但当应用于其他系列的检查点模型时，LoRA 无法成功应用。以下是最常见的 SDXL 插画基础模型系列：</p><ul><li><strong>SDXL-base-1.0 系列</strong>：SDXL 的基础模型。此模型不太适合生成插画。</li><li><strong>animagineXL V3 系列</strong>：在 PDXL（PonyV6）出现之前，这款插画 AI 模型非常流行。<em>在 V3 中训练的 LoRA 无法用于 V4。</em></li><li><strong>ponyDiffusionV6XL 系列</strong>：自推出以来，这款流行模型迅速占据了市场。然而，生成的图像中经常包含 NSFW 内容，需要通过负面提示进行调整。</li><li><strong>illustriousXL01 系列</strong>：以 kohaku-xl-beta5 为基础模型的系列。截至撰写本文时，这是最具活力的模型，能够生成高质量的插画。与 animagineXL 一样，不同版本之间的兼容性较差。</li><li><strong>NoobAI-XL 系列</strong>：以 illustrious-xl-early-release-v0 为基础模型，因此可能属于 illustriousXL 系列，但这也是一个流行的插画 AI 模型。</li></ul><p>在 SDXL 的 LoRA 训练中，确定 LoRA 将在哪个系列模型上进行训练非常重要。</p><h3 id="兼容性测试生成" tabindex="-1"><a class="header-anchor" href="#兼容性测试生成"><span>兼容性测试生成</span></a></h3><p>为了更容易理解兼容性，让我们看看每个模型生成的对比图像。要比较的 LoRA 包括 <code>[SDXL-base-1.0VAEFix / animagineXLV31_v31 / ponyDiffusionV6XL_v6StartWithThisOne / illustriousXL_v01 / noobaiXLNAIXL_epsilonPred 1.1-Version]</code>。这些模型被指定为预训练模型，并使用默认参数进行训练。</p><p><strong>训练参数</strong></p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>训练图像数量：100</span></span>\n<span class="line"><span>重复次数：5</span></span>\n<span class="line"><span>训练批量大小：1</span></span>\n<span class="line"><span>Epoch：1</span></span>\n<span class="line"><span>最大训练步数：1600</span></span>\n<span class="line"><span>种子：123</span></span>\n<span class="line"><span>学习率调度器：cosine</span></span>\n<span class="line"><span>优化器：AdamW8bit</span></span>\n<span class="line"><span>学习率：0.0001 (1e-4)</span></span>\n<span class="line"><span>Unet 学习率：0.0001 (1e-4)</span></span>\n<span class="line"><span>文本编码器学习率：0.00005 (5e-5)</span></span>\n<span class="line"><span>网络维度（Rank）：8</span></span>\n<span class="line"><span>网络 Alpha：1</span></span>\n<span class="line"><span>clip_skip：0 *在 SDXL 中，Clip skip 被禁用。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>A1111 WebUI 生成参数</strong></p><p><strong>提示词：</strong></p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>dcai-girl, 1girl, looking at viewer, solo, short hair, orange hair, brown eyes, animal ears, dress, masterpiece, meadow, sky, day &lt;lora:DCAI_Girl_SDXL_Def_sdxl-base:1&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>负面提示词：</strong></p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>worst quality, low quality, bad anatomy, realistic, lips, inaccurate limb, extra digit, fewer digits, six fingers, monochrome, nsfw</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数</strong></p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>步数：20</span></span>\n<span class="line"><span>采样器：DPM++ SDE</span></span>\n<span class="line"><span>调度类型：Karras</span></span>\n<span class="line"><span>CFG 比例：6</span></span>\n<span class="line"><span>种子：3156195032</span></span>\n<span class="line"><span>尺寸：1024x1024</span></span>\n<span class="line"><span>VAE：sdxl.vae.safetensors</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="sdxl-base-1-0" tabindex="-1"><a class="header-anchor" href="#sdxl-base-1-0"><span>SDXL-base-1.0</span></a></h2><p>第一张对比图像是使用 &quot;SDXL-base-1.0&quot; 生成的。最右侧的图像是 LoRA 适配前的生成结果。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-base1.jpg" alt="由 SDXL-base-1.0 模型生成的 LoRA 对比图" tabindex="0" loading="lazy"><figcaption>由 SDXL-base-1.0 模型生成的 LoRA 对比图</figcaption></figure><p>最右侧：SDXL-base LoRA 训练得相当好。您还可以看到其他 LoRA 对服装有轻微影响。</p><h2 id="animaginexlv31-v31" tabindex="-1"><a class="header-anchor" href="#animaginexlv31-v31"><span>animagineXLV31_v31</span></a></h2><p>下一张对比图像是使用 &quot;animagineXLV31_v31&quot; 生成的。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-anima3.jpg" alt="由 animagineXLV31_v31 生成的 LoRA 对比图" tabindex="0" loading="lazy"><figcaption>由 animagineXLV31_v31 生成的 LoRA 对比图</figcaption></figure><p>从右数第二张：animagineXLV3.1 LoRA 的再现效果更好。您可以看到其他 LoRA 对服装也有一些影响。</p><h2 id="ponydiffusionv6xl-v6startwiththisone" tabindex="-1"><a class="header-anchor" href="#ponydiffusionv6xl-v6startwiththisone"><span>ponyDiffusionV6XL_v6StartWithThisOne</span></a></h2><p>这是使用 &quot;ponyDiffusionV6XL_v6StartWithThisOne&quot; 生成的对比图像。*为生成添加了 PonyDiffusionV6XL 特有的质量修饰符 &quot;score_9, score_8_up, score_7_up&quot; 和负面提示的 &quot;score_6, score_5, score_4&quot;。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-pony6.jpg" alt="由 ponyDiffusionV6XL_v6StartWithThisOne 生成的 LoRA 对比图" tabindex="0" loading="lazy"><figcaption>由 ponyDiffusionV6XL_v6StartWithThisOne 生成的 LoRA 对比图</figcaption></figure><p>从右数第三张：您可以看到，除了 ponyDiffusionV6XL 的 LoRA 外，几乎没有其他影响。</p><h2 id="illustriousxl-v01" tabindex="-1"><a class="header-anchor" href="#illustriousxl-v01"><span>illustriousXL_v01</span></a></h2><p>这是使用 &quot;illustriousXL_v01&quot; 生成的对比图像。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-illusxl.jpg" alt="由 illustriousXL_v01 生成的 LoRA 对比图" tabindex="0" loading="lazy"><figcaption>由 illustriousXL_v01 生成的 LoRA 对比图</figcaption></figure><p>从右数第四张：illustriousXL 的 LoRA 学习得相当好，除了服装的颜色。可以看到其他 LoRA 几乎没有影响。</p><h2 id="noobaixlnaixl-epsilonpred-1-1-version" tabindex="-1"><a class="header-anchor" href="#noobaixlnaixl-epsilonpred-1-1-version"><span>noobaiXLNAIXL_epsilonPred 1.1-Version</span></a></h2><p>这是使用 &quot;noobaiXLNAIXL_epsilonPred 1.1-Version&quot; 生成的对比图像。*主模型是 &quot;NOOBAI XL-VPred 1.0&quot;，但 V 预测仅适用于 A1111WebUI 的开发版本。在这种情况下，使用了 Epsilon 预测版本。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-noobai.jpg" alt="由 noobaiXLNAIXL_epsilonPred 1.1-Version 生成的 LoRA 对比图" tabindex="0" loading="lazy"><figcaption>由 noobaiXLNAIXL_epsilonPred 1.1-Version 生成的 LoRA 对比图</figcaption></figure><p>从右数第五张：noobaiXLNAIXL_epsilonPred 1.1-Version 的 LoRA 能够再现面部，但无法再现服装。您还可以看到对 illustriousXL 的轻微影响。</p><p>以上对比图像表明，SDXL 的 LoRA 不具有兼容性。</p><hr><h2 id="使用-kohya-ss-gui-的默认参数进行训练" tabindex="-1"><a class="header-anchor" href="#使用-kohya-ss-gui-的默认参数进行训练"><span>使用 Kohya ss GUI 的默认参数进行训练</span></a></h2><p>在本节中，我们将介绍如何使用 Kohya ss GUI 的默认参数进行训练。我们将使用名为 &quot;DCAI_Girl_SDXL_Def_sdxl-base&quot; 的角色模型进行演示。</p><h3 id="数据集" tabindex="-1"><a class="header-anchor" href="#数据集"><span>数据集</span></a></h3><p>本次训练使用的数据集是包含 100 张图像的精美插画。这些图像展示了一个可爱的女孩角色，具有以下特征：</p><ul><li>短发</li><li>橙色头发</li><li>棕色眼睛</li><li>动物耳朵</li><li>连衣裙</li><li>草地、天空和白天的场景</li></ul><h3 id="默认参数" tabindex="-1"><a class="header-anchor" href="#默认参数"><span>默认参数</span></a></h3><p>以下是 Kohya ss GUI 的默认训练参数：</p><ul><li><strong>训练图像数量</strong>：100</li><li><strong>重复次数</strong>：5</li><li><strong>训练批量大小</strong>：1</li><li><strong>Epoch</strong>：1</li><li><strong>最大训练步数</strong>：1600</li><li><strong>种子</strong>：123</li><li><strong>学习率调度器</strong>：cosine</li><li><strong>优化器</strong>：AdamW8bit</li><li><strong>学习率</strong>：0.0001 (1e-4)</li><li><strong>Unet 学习率</strong>：0.0001 (1e-4)</li><li><strong>文本编码器学习率</strong>：0.00005 (5e-5)</li><li><strong>网络维度（Rank）</strong>：8</li><li><strong>网络 Alpha</strong>：1</li><li><strong>clip_skip</strong>：0 *在 SDXL 中，Clip skip 被禁用。</li></ul><h3 id="使用训练好的-lora-进行测试生成" tabindex="-1"><a class="header-anchor" href="#使用训练好的-lora-进行测试生成"><span>使用训练好的 LoRA 进行测试生成</span></a></h3><p>在训练完成后，我们将使用训练好的 LoRA 进行测试生成。以下是测试生成的参数：</p><ul><li><strong>步数</strong>：20</li><li><strong>采样器</strong>：DPM++ SDE</li><li><strong>调度类型</strong>：Karras</li><li><strong>CFG 比例</strong>：6</li><li><strong>种子</strong>：3156195032</li><li><strong>尺寸</strong>：1024x1024</li><li><strong>VAE</strong>：sdxl.vae.safetensors</li></ul><p>测试生成的提示词与负面提示词与之前的兼容性测试相同。</p><hr><h2 id="本次训练中使用的参数" tabindex="-1"><a class="header-anchor" href="#本次训练中使用的参数"><span>本次训练中使用的参数</span></a></h2><p>在本次训练中，我们对以下参数进行了调整：</p><h3 id="学习率调度器" tabindex="-1"><a class="header-anchor" href="#学习率调度器"><span>学习率调度器</span></a></h3><p>我们使用了 cosine学习率调度器。该调度器在训练初期使用较大学习率，随着训练进行逐渐减小学习率。</p><h3 id="优化器" tabindex="-1"><a class="header-anchor" href="#优化器"><span>优化器</span></a></h3><p>我们选择了 AdamW8bit 优化器。该优化器在处理稀疏梯度时表现良好，适用于大多数深度学习任务。</p><h3 id="其他参数" tabindex="-1"><a class="header-anchor" href="#其他参数"><span>其他参数</span></a></h3><p>其他参数保持默认设置。</p><hr><h2 id="训练结果" tabindex="-1"><a class="header-anchor" href="#训练结果"><span>训练结果</span></a></h2><p>经过 1600 步的训练，我们得到了令人满意的结果。以下是与其他 LoRA 的组合以及应用于同系列的检查点模型的测试生成结果。</p><h3 id="与其他-lora-的组合" tabindex="-1"><a class="header-anchor" href="#与其他-lora-的组合"><span>与其他 LoRA 的组合</span></a></h3><p>我们将训练好的 LoRA 与其他几个 LoRA 进行了组合，得到了以下结果：</p><ul><li><strong>DCAI_Girl_SDXL_Def_sdxl-base + animagineXLV31_v31</strong>：生成的图像中，女孩角色的特征得到了很好的保留，服装细节也很到位。</li><li><strong>DCAI_Girl_SDXL_Def_sdxl-base + ponyDiffusionV6XL_v6StartWithThisOne</strong>：生成的图像中，女孩角色的特征依然明显，但服装细节有所丢失。</li><li><strong>DCAI_Girl_SDXL_Def_sdxl-base + illustriousXL_v01</strong>：生成的图像中，女孩角色的特征和服装细节都得到了很好的保留。</li><li><strong>DCAI_Girl_SDXL_Def_sdxl-base + noobaiXLNAIXL_epsilonPred 1.1-Version</strong>：生成的图像中，女孩角色的面部特征得到了很好的再现，但服装细节较差。</li></ul><h3 id="应用于同系列的检查点模型" tabindex="-1"><a class="header-anchor" href="#应用于同系列的检查点模型"><span>应用于同系列的检查点模型</span></a></h3><p>我们还将训练好的 LoRA 应用于同系列的检查点模型，得到了以下结果：</p><ul><li><strong>DCAI_Girl_SDXL_Def_sdxl-base 应用于 sdxl-base-1.0</strong>：生成的图像中，女孩角色的特征得到了很好的保留，服装细节也很到位。</li><li><strong>DCAI_Girl_SDXL_Def_sdxl-base 应用于 animagineXLV31_v31</strong>：生成的图像中，女孩角色的特征依然明显，但服装细节有所丢失。</li><li><strong>DCAI_Girl_SDXL_Def_sdxl-base 应用于 ponyDiffusionV6XL_v6StartWithThisOne</strong>：生成的图像中，女孩角色的特征和服装细节都得到了很好的保留。</li><li><strong>DCAI_Girl_SDXL_Def_sdxl-base 应用于 illustriousXL_v01</strong>：生成的图像中，女孩角色的特征和服装细节都得到了很好的保留。</li><li><strong>DCAI_Girl_SDXL_Def_sdxl-base 应用于 noobaiXLNAIXL_epsilonPred 1.1-Version</strong>：生成的图像中，女孩角色的面部特征得到了很好的再现，但服装细节较差。</li></ul><hr><h2 id="使用-kohya-ss-gui-的默认参数进行训练-1" tabindex="-1"><a class="header-anchor" href="#使用-kohya-ss-gui-的默认参数进行训练-1"><span>使用 Kohya ss GUI 的默认参数进行训练</span></a></h2><p>现在您已经了解了 SDXL 的兼容性，让我们使用 &quot;animagineXLV31_v30Base&quot; 进行训练。如果您在此模型上训练 LoRA，可以将其用作 animagineXL V3 系列的检查点模型。请注意，animagineXL V3 的 LoRA 无法用于 animagineXL V4。让我们将 Animagine XL 4.0 Opt 生成的图像与之前的对比图像进行比较。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-anima3.jpg" alt="由 animagineXLV31_v31 生成的 LoRA 对比图" tabindex="0" loading="lazy"><figcaption>由 animagineXLV31_v31 生成的 LoRA 对比图</figcaption></figure><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-anima4.jpg" alt="由 Animagine XL 4.0 Opt 生成的 LoRA 对比图" tabindex="0" loading="lazy"><figcaption>由 Animagine XL 4.0 Opt 生成的 LoRA 对比图</figcaption></figure><p>从右数第二张：服装略有影响，但生成的再现较少。</p><h3 id="数据集-1" tabindex="-1"><a class="header-anchor" href="#数据集-1"><span>数据集</span></a></h3><p>首先，让我们使用默认参数进行训练。训练源数据集基于 &quot;如何创建原创角色 LoRA [数据集] 制作训练图像和标题&quot; 中创建的数据。如果您想使用相同的数据集，可以在 Patreon 上获取，但仅限付费支持者下载。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/03/finished-dataset-images.jpg" alt="数据集图像样本列表" tabindex="0" loading="lazy"><figcaption>数据集图像样本列表</figcaption></figure><h3 id="默认参数-1" tabindex="-1"><a class="header-anchor" href="#默认参数-1"><span>默认参数</span></a></h3><p>准备好数据集后，我们从默认值开始训练，并对 SDXL 模型的插画训练稍作修改。需要输入或更改的区域用红色文字标注。</p><ul><li><strong>预训练模型名称或路径</strong>：animagineXLV31_v30Base.safetensors</li><li><strong>训练模型输出名称</strong>：DCAI_Girl_SDXL_Def_anima3 *模型的输出名称</li><li><strong>实例提示词</strong>：dcai-girl *此情况下使用的标题方法忽略此值，但如果不输入会报错。</li><li><strong>类别提示词</strong>：1girl *与上述原因相同。</li><li><strong>重复次数</strong>：5 [默认值：40] *因为训练源有 100 张图像，我们希望将图像总数设为 500。</li><li><strong>预设</strong>：无</li><li><strong>LoRA 类型</strong>：标准</li><li><strong>训练批量大小</strong>：1</li><li><strong>Epoch</strong>：1</li><li><strong>最大训练 Epoch</strong>：0</li><li><strong>最大训练步数</strong>：1600</li><li><strong>每 N 个 Epoch 保存一次</strong>：1</li><li><strong>种子</strong>：123 [默认值：0 = 随机] *插入适当的数字以控制参数。</li><li><strong>学习率调度器</strong>：cosine</li><li><strong>优化器</strong>：AdamW8bit</li><li><strong>学习率</strong>：0.0001 (1e-4)</li><li><strong>文本编码器学习率</strong>：0.00005 (5e-5) [默认值：0.0001 (1e-4)] *更改为官方文档中推荐的默认值。</li><li><strong>Unet 学习率</strong>：0.0001 (1e-4)</li><li><strong>学习率预热（总步数的百分比）</strong>：10</li><li><strong>网络维度（Rank）</strong>：8</li><li><strong>网络 Alpha</strong>：1</li><li><strong>clip_skip</strong>：0 [默认值：1] *因为在 SDXL 中禁用了 Clip skip</li></ul><h3 id="使用训练好的-lora-进行测试生成-1" tabindex="-1"><a class="header-anchor" href="#使用训练好的-lora-进行测试生成-1"><span>使用训练好的 LoRA 进行测试生成</span></a></h3><p>使用 A1111 WebUI 生成了训练好的 LoRA，结果如下图所示。使用 &quot;animagineXLV31_v31&quot; 生成了 LoRA。下图是应用 LoRA 之前的图像。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-def.jpg" alt="默认参数结果" tabindex="0" loading="lazy"><figcaption>默认参数结果</figcaption></figure><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-def-no-lora.jpg" alt="无 LoRA 的结果" tabindex="0" loading="lazy"><figcaption>无 LoRA 的结果</figcaption></figure><p>再现性很高，但类似于中奖的种子 Gacha，其他种子生成不稳定。生成参数与之前的对比图像几乎相同，但为 AnimagineV3.1 更改了一些提示词。</p><p><strong>提示词：</strong></p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>dcai-girl, 1girl, looking at viewer, solo, short hair, orange hair, brown eyes, animal ears, dress, meadow, sky, day, newest, masterpiece, best quality, very aesthetic, absurdres &lt;lora:DCAI_Girl_SDXL_Def_anima3:1&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>负面提示词：</strong></p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>worst quality, low quality, bad anatomy, realistic, lips, inaccurate limb, extra digit, fewer digits, six fingers, monochrome, nsfw</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>参数：</strong></p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" data-title="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>步数：30</span></span>\n<span class="line"><span>采样器：DPM++ SDE</span></span>\n<span class="line"><span>调度类型：Karras</span></span>\n<span class="line"><span>CFG 比例：6</span></span>\n<span class="line"><span>种子：3156195032</span></span>\n<span class="line"><span>尺寸：1344x768</span></span>\n<span class="line"><span>VAE：sdxl.vae.safetensors</span></span>\n<span class="line"><span>Hires.fix：True</span></span>\n<span class="line"><span>ADetailer：True</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="训练结果-1" tabindex="-1"><a class="header-anchor" href="#训练结果-1"><span>训练结果</span></a></h2><p>A1111 WebUI 设置与之前的测试生成使用的设置相同。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final.jpg" alt="训练的最终结果" tabindex="0" loading="lazy"><figcaption>训练的最终结果</figcaption></figure><h3 id="与其他-lora-的组合-1" tabindex="-1"><a class="header-anchor" href="#与其他-lora-的组合-1"><span>与其他 LoRA 的组合</span></a></h3><p>当与其他 LoRA 一起使用时，不同的权重比例可能无法很好地应用。以下是 &quot;xl_more_art-full / xl_real / Enhancer&quot; 在 1.0 权重下的适配，使用相同的生成设置。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-more_art-full.jpg" alt="与其他 LoRA 的组合结果" tabindex="0" loading="lazy"><figcaption>与其他 LoRA 的组合结果</figcaption></figure><p>背景发生了变化，但角色本身适配良好。</p><h3 id="应用于同系列的检查点模型-1" tabindex="-1"><a class="header-anchor" href="#应用于同系列的检查点模型-1"><span>应用于同系列的检查点模型</span></a></h3><p>在这种情况下，它是用 AnimagineV3.1 训练的，因此可以与同系列的检查点模型一起使用。所有内容都使用与测试生成相同的设置生成。</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-animapencilxl_v500.jpg" alt="animaPencilXL_v500 的生成结果" tabindex="0" loading="lazy"><figcaption>animaPencilXL_v500 的生成结果</figcaption></figure><p>animaPencilXL_v500</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-anythingxl_xl.jpg" alt="AnythingXL_xl 的生成结果" tabindex="0" loading="lazy"><figcaption>AnythingXL_xl 的生成结果</figcaption></figure><p>AnythingXL_xl</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-chenkinanimeImpastobased.jpg" alt="chenkinAnimeImpastoBased_v10 的生成结果" tabindex="0" loading="lazy"><figcaption>chenkinAnimeImpastoBased_v10 的生成结果</figcaption></figure><p>chenkinAnimeImpastoBased_v10</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-lizmix_versionx.jpg" alt="lizmix_versionX 的生成结果" tabindex="0" loading="lazy"><figcaption>lizmix_versionX 的生成结果</figcaption></figure><p>lizmix_versionX</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-ranimexlbaseonanimagine_v10.jpg" alt="ranimeXLBaseOnAnimagine_v10 的生成结果" tabindex="0" loading="lazy"><figcaption>ranimeXLBaseOnAnimagine_v10 的生成结果</figcaption></figure><p>ranimeXLBaseOnAnimagine_v10</p><figure><img src="https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-realAnimagineXL_v10.jpg" alt="realAnimagineXL_v10 的生成结果" tabindex="0" loading="lazy"><figcaption>realAnimagineXL_v10 的生成结果</figcaption></figure><p>realAnimagineXL_v10</p><p>如上所示，如果合并模型包含 AnimagineV3.1，则可以应用 LoRA。</p><hr><h2 id="结论" tabindex="-1"><a class="header-anchor" href="#结论"><span>结论</span></a></h2><p>通过本次训练，我们成功地创建了一个原创角色 LoRA，并将其应用于多个 SDXL 检查点模型。训练结果表明，LoRA 在同一系列的模型之间具有良好的兼容性。然而，在不同系列的模型之间，LoRA 的兼容性较差。</p><p>在未来的工作中，我们将继续探索 LoRA 的潜力，并尝试将其应用于更多样化的角色和场景中。我们相信，随着技术的不断进步，LoRA 将在插画 AI 领域发挥越来越重要的作用。</p><p>感谢您阅读本教程！希望对您有所帮助。如有任何疑问或建议，请随时与我们联系。</p>',124)]))}]]),t=JSON.parse('{"path":"/zh/posts/reprints/original-character-lora-sdxl-character-training.html","title":"如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练","lang":"zh-CN","frontmatter":{"title":"如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练","date":"2025-05-12T07:01:40.000Z","tags":["Kohya SS GUI","LoRA","SDXL"],"categories":["高级"],"description":"如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练 如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练封面图片如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练封面图片 目录 SDXL 预训练模型的兼容性 1.1. 兼容性测试生成 使用 Kohya ss GUI 的默认参数进行训练 2.1. 数据集 2....","gitInclude":[],"head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://neverbiasu.github.io/posts/reprints/original-character-lora-sdxl-character-training.html"}],["meta",{"property":"og:url","content":"https://neverbiasu.github.io/zh/posts/reprints/original-character-lora-sdxl-character-training.html"}],["meta",{"property":"og:site_name","content":"Nlog"}],["meta",{"property":"og:title","content":"如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练"}],["meta",{"property":"og:description","content":"如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练 如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练封面图片如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练封面图片 目录 SDXL 预训练模型的兼容性 1.1. 兼容性测试生成 使用 Kohya ss GUI 的默认参数进行训练 2.1. 数据集 2...."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"http://digitalcreativeai.net/_next/image?url=https%3A%2F%2Fdca.data-hub-center.com%2Fcontent%2Fuploads%2F2025%2F05%2Feye_catch_original-character-lora-sdxl-character-training-en.jpg&w=3840&q=80"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"article:tag","content":"Kohya SS GUI"}],["meta",{"property":"article:tag","content":"LoRA"}],["meta",{"property":"article:tag","content":"SDXL"}],["meta",{"property":"article:published_time","content":"2025-05-12T07:01:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练\\",\\"image\\":[\\"http://digitalcreativeai.net/_next/image?url=https%3A%2F%2Fdca.data-hub-center.com%2Fcontent%2Fuploads%2F2025%2F05%2Feye_catch_original-character-lora-sdxl-character-training-en.jpg&w=3840&q=80\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-base1.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-anima3.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-pony6.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-illusxl.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-noobai.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-anima3.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/compare-sdxl-base-model-anima4.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/03/finished-dataset-images.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-def.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-def-no-lora.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-more_art-full.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-animapencilxl_v500.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-anythingxl_xl.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-chenkinanimeImpastobased.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-lizmix_versionx.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-ranimexlbaseonanimagine_v10.jpg\\",\\"https://dca.data-hub-center.com/content/uploads/2025/05/sdxl-train-anima3-final-realAnimagineXL_v10.jpg\\"],\\"datePublished\\":\\"2025-05-12T07:01:40.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"neverbiasu\\",\\"url\\":\\"https://neverbiasu.github.io\\"}]}"]]},"headers":[{"level":2,"title":"目录","slug":"目录","link":"#目录","children":[]},{"level":2,"title":"SDXL 预训练模型的兼容性","slug":"sdxl-预训练模型的兼容性","link":"#sdxl-预训练模型的兼容性","children":[{"level":3,"title":"兼容性测试生成","slug":"兼容性测试生成","link":"#兼容性测试生成","children":[]}]},{"level":2,"title":"SDXL-base-1.0","slug":"sdxl-base-1-0","link":"#sdxl-base-1-0","children":[]},{"level":2,"title":"animagineXLV31_v31","slug":"animaginexlv31-v31","link":"#animaginexlv31-v31","children":[]},{"level":2,"title":"ponyDiffusionV6XL_v6StartWithThisOne","slug":"ponydiffusionv6xl-v6startwiththisone","link":"#ponydiffusionv6xl-v6startwiththisone","children":[]},{"level":2,"title":"illustriousXL_v01","slug":"illustriousxl-v01","link":"#illustriousxl-v01","children":[]},{"level":2,"title":"noobaiXLNAIXL_epsilonPred 1.1-Version","slug":"noobaixlnaixl-epsilonpred-1-1-version","link":"#noobaixlnaixl-epsilonpred-1-1-version","children":[]},{"level":2,"title":"使用 Kohya ss GUI 的默认参数进行训练","slug":"使用-kohya-ss-gui-的默认参数进行训练","link":"#使用-kohya-ss-gui-的默认参数进行训练","children":[{"level":3,"title":"数据集","slug":"数据集","link":"#数据集","children":[]},{"level":3,"title":"默认参数","slug":"默认参数","link":"#默认参数","children":[]},{"level":3,"title":"使用训练好的 LoRA 进行测试生成","slug":"使用训练好的-lora-进行测试生成","link":"#使用训练好的-lora-进行测试生成","children":[]}]},{"level":2,"title":"本次训练中使用的参数","slug":"本次训练中使用的参数","link":"#本次训练中使用的参数","children":[{"level":3,"title":"学习率调度器","slug":"学习率调度器","link":"#学习率调度器","children":[]},{"level":3,"title":"优化器","slug":"优化器","link":"#优化器","children":[]},{"level":3,"title":"其他参数","slug":"其他参数","link":"#其他参数","children":[]}]},{"level":2,"title":"训练结果","slug":"训练结果","link":"#训练结果","children":[{"level":3,"title":"与其他 LoRA 的组合","slug":"与其他-lora-的组合","link":"#与其他-lora-的组合","children":[]},{"level":3,"title":"应用于同系列的检查点模型","slug":"应用于同系列的检查点模型","link":"#应用于同系列的检查点模型","children":[]}]},{"level":2,"title":"使用 Kohya ss GUI 的默认参数进行训练","slug":"使用-kohya-ss-gui-的默认参数进行训练-1","link":"#使用-kohya-ss-gui-的默认参数进行训练-1","children":[{"level":3,"title":"数据集","slug":"数据集-1","link":"#数据集-1","children":[]},{"level":3,"title":"默认参数","slug":"默认参数-1","link":"#默认参数-1","children":[]},{"level":3,"title":"使用训练好的 LoRA 进行测试生成","slug":"使用训练好的-lora-进行测试生成-1","link":"#使用训练好的-lora-进行测试生成-1","children":[]}]},{"level":2,"title":"训练结果","slug":"训练结果-1","link":"#训练结果-1","children":[{"level":3,"title":"与其他 LoRA 的组合","slug":"与其他-lora-的组合-1","link":"#与其他-lora-的组合-1","children":[]},{"level":3,"title":"应用于同系列的检查点模型","slug":"应用于同系列的检查点模型-1","link":"#应用于同系列的检查点模型-1","children":[]}]},{"level":2,"title":"结论","slug":"结论","link":"#结论","children":[]}],"readingTime":{"minutes":11.53,"words":3460},"filePathRelative":"zh/posts/reprints/original-character-lora-sdxl-character-training.md","localizedDate":"2025年5月12日","excerpt":"\\n<figure><img src=\\"http://digitalcreativeai.net/_next/image?url=https%3A%2F%2Fdca.data-hub-center.com%2Fcontent%2Fuploads%2F2025%2F05%2Feye_catch_original-character-lora-sdxl-character-training-en.jpg&amp;w=3840&amp;q=80\\" alt=\\"如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练封面图片\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>如何创建原创角色 LoRA [SDXL 训练] SDXL 角色训练封面图片</figcaption></figure>","autoDesc":true}')}}]);